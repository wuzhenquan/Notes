<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title></title>
</head>

<body>
    <div id="myDiv"></div>
    <script type="text/javascript">
        //6岁内容
        // function foo(x) {
        //     var tmp = 3;
        //
        //     function bar(y) {
        //         console.log(x + y + (++tmp));
        //     }
        //     bar(10);
        // }
        // foo(2);
        // 以上,虽然内部function可以访问外部function里的变量
        // 但, 这还不是闭包, 因为bar(10)是在函数foo内执行的,
        // 下面的这个, 才算是闭包, 因为bar是在外部调用的
        // function foo(x) {
        // var tmp = 3;
        // return function(y) {
        //     alert(x + y + (++tmp));
        // }
        // }
        // var bar = foo(2); // bar 现在是一个闭包
        // bar(10);


        //7岁内容
        // function foo(x) {
        //     var tmp = 3;
        //     return function(y) {
        //         console.log(x + y + tmp);
        //         x.memb = x.memb ? x.memb + 1 : 1;
        //         console.log(x.memb);
        //     }
        // }
        // var age = new Number(2);
        // var bar = foo(age);
        // bar(10);
        //不用return关键字的闭包例子
        // function closureExample(objID, text, timedelay){
        //     setTimeout(function(){
        //         document.getElementById(objID).innerHTML = text;
        //     },timedelay)
        // }
        // closureExample('myDiv','closure is created',1000);

        //总结
        // 另一个例子
        // function foo() {
        //     var a = 2;
        //
        //     function bar() {
        //         console.log(a);
        //     }
        //     return bar;//引用
        // }
        // var baz = foo();//这里得到的是函数bar的引用, 而不是那一坨代码, 这里才算创建了一个闭包
        // baz();//这里开始执行bar函数.
        // 因为bar()处于foo()内部，它拥有涵盖foo()作用域的闭包，使得该作用域能够一直存活，以供bar()在之后任何时间进行引用。
        // bar()依然持有对该作用域的引用，而这个引用就叫作闭包。
        // 简言之：当函数可以记住并访问所在的词法作用域，即使函数是在当前词法作用域之外执行，这时就产生了闭包


        // function foo() {
        //     var a = 2;
        //     function bar() {
        //         console.log(a);
        //     }
        //     return bar();
        // }
        // var baz = foo();//2

        // function foo() {
        //     var a = 2;
        //     function bar() {
        //         console.log(a);
        //     }
        //     return bar;
        // }
        // var baz = foo()();
    </script>
</body>

</html>
